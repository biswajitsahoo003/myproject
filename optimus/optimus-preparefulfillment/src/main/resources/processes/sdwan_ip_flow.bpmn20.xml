<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">
  <signal id="service-configuration-ack-timeout-signal" name="service-configuration-ack-timeout-signal" flowable:scope="global"></signal>
  <process id="sdwan_ip_flow" name="sdwan_ip_flow" isExecutable="true">
    <documentation>sdwan_ip_flow</documentation>
    <startEvent id="service_configuration_process_start">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${ processStartListener }"></flowable:executionListener>
      </extensionElements>
    </startEvent>
    <endEvent id="service_configuration_process_end">
      <extensionElements>
        <flowable:executionListener event="end" delegateExpression="${ processEndListener }"></flowable:executionListener>
      </extensionElements>
    </endEvent>
    <serviceTask id="get-ip-service-info" name="Get IP Service Info" flowable:delegateExpression="${ getIpServiceInfoDelegate }"></serviceTask>
    <receiveTask id="get-ip-service-info-async" name="Get IP Service Info Async">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${ serviceTaskStartListener }"></flowable:executionListener>
        <flowable:executionListener event="end" delegateExpression="${ serviceTaskEndListener }"></flowable:executionListener>
      </extensionElements>
    </receiveTask>
    <exclusiveGateway id="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F" default="sid-FBB935CD-A237-4D83-B5A2-AD7765C361A5"></exclusiveGateway>
    <exclusiveGateway id="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" default="sid-BA2723D7-D451-4058-90F5-6FBC88E2CB67"></exclusiveGateway>
    <userTask id="enrich-service-design-ip-jeopardy" name="Service Design Jeopardy - IP">
      <extensionElements>
        <flowable:taskListener event="create" delegateExpression="${ taskCreateListener }"></flowable:taskListener>
        <flowable:taskListener event="complete" delegateExpression="${ taskCompleteListener }"></flowable:taskListener>
      </extensionElements>
    </userTask>
    <sequenceFlow id="sid-B3C66F55-9C77-40DC-B374-17868B720ABC" sourceRef="get-ip-service-info-async" targetRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B"></sequenceFlow>
    <sequenceFlow id="sid-8A9018EE-6690-4B2C-BBF9-22A6541F686B" sourceRef="get-ip-service-info" targetRef="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F"></sequenceFlow>
    <sequenceFlow id="sid-FBB935CD-A237-4D83-B5A2-AD7765C361A5" name="No" sourceRef="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F" targetRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B"></sequenceFlow>
    <sequenceFlow id="sid-EBEE76C5-0124-4A82-BFB8-78BC684F3FF8" sourceRef="enrich-service-design-ip-jeopardy" targetRef="get-ip-service-info"></sequenceFlow>
    <sequenceFlow id="sid-FDBD136A-B59B-4713-AA35-9CDAF04B37E9" name="Yes" sourceRef="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F" targetRef="get-ip-service-info-async">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ getIpServiceSyncCallCompleted == true }]]></conditionExpression>
    </sequenceFlow>
    <boundaryEvent id="get-ip-service-info-async-wait" attachedToRef="get-ip-service-info-async" cancelActivity="true">
      <timerEventDefinition>
        <timeDuration>PT15M</timeDuration>
      </timerEventDefinition>
    </boundaryEvent>
    <sequenceFlow id="get-ip-service-info-async-wait-time" sourceRef="get-ip-service-info-async-wait" targetRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B">
      <extensionElements>
        <flowable:executionListener event="take" delegateExpression="${ timeEventEndListener }"></flowable:executionListener>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="sid-B425BE94-E427-4AAA-94A8-AB5E90067803" name="No" sourceRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" targetRef="enrich-service-design-ip-jeopardy">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ (getIpServiceSyncCallCompleted == false || getIpServiceSuccess == false) && var:get(getIpServiceRetryAttempt)>1 }]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-22AE6E8D-03EE-4850-877B-D6675F45693B" sourceRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" targetRef="get-ip-service-info">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ (getIpServiceSyncCallCompleted == false || getIpServiceSuccess == false) && (var:get(getIpServiceRetryAttempt) <=2 ) }]]></conditionExpression>
    </sequenceFlow>
    <callActivity id="cpe-managed-ip" name="Get Down Time" calledElement="get_downtime_jul25workflow" flowable:calledElementType="key" flowable:inheritVariables="true" flowable:fallbackToDefaultTenant="false">
      <extensionElements>
        <flowable:out source="downtimeWindow" target="downtimeWindow"></flowable:out>
        <flowable:out source="checkDowntimeAction" target="checkDowntimeAction"></flowable:out>
        <flowable:executionListener event="start" delegateExpression="${ downtimeEventEndListener}"></flowable:executionListener>
      </extensionElements>
    </callActivity>
    <sequenceFlow id="service_configuration_activity_start" sourceRef="service_configuration_process_start" targetRef="get-ip-service-info">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${ activityStartListener }"></flowable:executionListener>
      </extensionElements>
    </sequenceFlow>
    <intermediateCatchEvent id="ip-managed-downtime-trigger">
      <extensionElements>
        <flowable:executionListener event="take" delegateExpression="${ timeEventEndListener }"></flowable:executionListener>
        <flowable:executionListener event="start" delegateExpression="${ serviceTaskStartListener }"></flowable:executionListener>
        <flowable:executionListener event="end" delegateExpression="${ serviceTaskEndListener }"></flowable:executionListener>
      </extensionElements>
      <timerEventDefinition>
        <timeDate>${ downtimeWindow }</timeDate>
      </timerEventDefinition>
    </intermediateCatchEvent>
    <exclusiveGateway id="sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB" default="sid-F239A610-7B9B-4BBC-B4F2-701E56DCBEB6"></exclusiveGateway>
    <exclusiveGateway id="sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F"></exclusiveGateway>
    <sequenceFlow id="sid-F239A610-7B9B-4BBC-B4F2-701E56DCBEB6" sourceRef="sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB" targetRef="sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F"></sequenceFlow>
    <sequenceFlow id="sid-BA2723D7-D451-4058-90F5-6FBC88E2CB67" name="Yes" sourceRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" targetRef="cpe-managed-ip"></sequenceFlow>
    <sequenceFlow id="sid-E089688F-8931-4454-A524-66B4894DC333" sourceRef="cpe-managed-ip" targetRef="sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB"></sequenceFlow>
    <sequenceFlow id="service_configuration_activity_end" sourceRef="sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F" targetRef="service_configuration_process_end">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${ activityEndListener }"></flowable:executionListener>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="sid-C7D0DF49-B77E-43F9-96FE-197C74FE1DBA" sourceRef="ip-managed-downtime-trigger" targetRef="sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F"></sequenceFlow>
    <sequenceFlow id="sid-7242924D-DBEF-40E8-B571-9D63DFA81F83" sourceRef="sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB" targetRef="ip-managed-downtime-trigger">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${checkDowntimeAction!="skip"}]]></conditionExpression>
    </sequenceFlow>
    <textAnnotation id="sid-15ECA792-11A5-451E-8092-D17812911DB3">
      <text>IP service  Sync call completed? </text>
    </textAnnotation>
    <association id="sid-ED4EA618-483C-446F-92E7-1D56B5FD197E" sourceRef="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F" targetRef="sid-15ECA792-11A5-451E-8092-D17812911DB3" associationDirection="None"></association>
    <textAnnotation id="sid-07F7EEE7-8C4E-4125-8DAF-545D542C1316">
      <text>Get IP Service Info  Success?</text>
    </textAnnotation>
    <association id="sid-C6BDF598-E480-42C7-A37C-FDC80287F1CF" sourceRef="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" targetRef="sid-07F7EEE7-8C4E-4125-8DAF-545D542C1316" associationDirection="None"></association>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_sdwan_ip_flow">
    <bpmndi:BPMNPlane bpmnElement="sdwan_ip_flow" id="BPMNPlane_sdwan_ip_flow">
      <bpmndi:BPMNShape bpmnElement="service_configuration_process_start" id="BPMNShape_service_configuration_process_start">
        <omgdc:Bounds height="30.0" width="30.0" x="135.0" y="217.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="service_configuration_process_end" id="BPMNShape_service_configuration_process_end">
        <omgdc:Bounds height="28.0" width="28.0" x="1080.0" y="218.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="get-ip-service-info" id="BPMNShape_get-ip-service-info">
        <omgdc:Bounds height="80.0" width="100.0" x="210.0" y="192.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="get-ip-service-info-async" id="BPMNShape_get-ip-service-info-async">
        <omgdc:Bounds height="80.0" width="100.0" x="319.0" y="63.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F" id="BPMNShape_sid-0BE45F6F-6F09-444E-9A7C-803855D6DB0F">
        <omgdc:Bounds height="40.0" width="40.0" x="349.0" y="212.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B" id="BPMNShape_sid-03178D91-FD6A-41C1-8EE9-2AB32A8D2B6B">
        <omgdc:Bounds height="40.0" width="40.0" x="518.5" y="212.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="enrich-service-design-ip-jeopardy" id="BPMNShape_enrich-service-design-ip-jeopardy">
        <omgdc:Bounds height="80.0" width="100.0" x="488.5" y="32.37316205018004"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-15ECA792-11A5-451E-8092-D17812911DB3" id="BPMNShape_sid-15ECA792-11A5-451E-8092-D17812911DB3">
        <omgdc:Bounds height="29.0" width="118.0" x="317.0" y="267.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-ED4EA618-483C-446F-92E7-1D56B5FD197E" id="BPMNShape_sid-ED4EA618-483C-446F-92E7-1D56B5FD197E">
        <omgdc:Bounds height="17.61316932430907" width="3.5226338648618025" x="372.4773661351382" y="249.88683067569093"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-07F7EEE7-8C4E-4125-8DAF-545D542C1316" id="BPMNShape_sid-07F7EEE7-8C4E-4125-8DAF-545D542C1316">
        <omgdc:Bounds height="36.0" width="97.0" x="465.0" y="264.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C6BDF598-E480-42C7-A37C-FDC80287F1CF" id="BPMNShape_sid-C6BDF598-E480-42C7-A37C-FDC80287F1CF">
        <omgdc:Bounds height="20.211975626275432" width="15.79060595802764" x="513.5" y="244.28802437372457"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="get-ip-service-info-async-wait" id="BPMNShape_get-ip-service-info-async-wait">
        <omgdc:Bounds height="31.0" width="31.0" x="404.20195417756906" y="68.48676718341162"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="cpe-managed-ip" id="BPMNShape_cpe-managed-ip">
        <omgdc:Bounds height="80.0" width="100.0" x="645.0" y="192.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ip-managed-downtime-trigger" id="BPMNShape_ip-managed-downtime-trigger">
        <omgdc:Bounds height="31.0" width="31.0" x="915.0" y="217.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB" id="BPMNShape_sid-5B3973F3-6E68-4E4A-AC99-0B243D9C33EB">
        <omgdc:Bounds height="40.0" width="40.0" x="840.0" y="212.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F" id="BPMNShape_sid-B0E7D4C0-6DC6-4687-BF7A-BFD1F0B2C27F">
        <omgdc:Bounds height="40.0" width="40.0" x="990.0" y="212.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-ED4EA618-483C-446F-92E7-1D56B5FD197E" id="BPMNEdge_sid-ED4EA618-483C-446F-92E7-1D56B5FD197E">
        <omgdi:waypoint x="372.325" y="249.1092042755344"></omgdi:waypoint>
        <omgdi:waypoint x="376.0" y="267.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C6BDF598-E480-42C7-A37C-FDC80287F1CF" id="BPMNEdge_sid-C6BDF598-E480-42C7-A37C-FDC80287F1CF">
        <omgdi:waypoint x="529.7280701754386" y="243.70000000000002"></omgdi:waypoint>
        <omgdi:waypoint x="513.5" y="264.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8A9018EE-6690-4B2C-BBF9-22A6541F686B" id="BPMNEdge_sid-8A9018EE-6690-4B2C-BBF9-22A6541F686B">
        <omgdi:waypoint x="309.949999999996" y="232.5"></omgdi:waypoint>
        <omgdi:waypoint x="349.0" y="232.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B3C66F55-9C77-40DC-B374-17868B720ABC" id="BPMNEdge_sid-B3C66F55-9C77-40DC-B374-17868B720ABC">
        <omgdi:waypoint x="418.95000000000005" y="139.85534689372997"></omgdi:waypoint>
        <omgdi:waypoint x="527.2261923370803" y="223.76795593102224"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7242924D-DBEF-40E8-B571-9D63DFA81F83" id="BPMNEdge_sid-7242924D-DBEF-40E8-B571-9D63DFA81F83">
        <omgdi:waypoint x="879.5725215517151" y="232.86330935251797"></omgdi:waypoint>
        <omgdi:waypoint x="915.0003828717807" y="232.61035452811615"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="service_configuration_activity_end" id="BPMNEdge_service_configuration_activity_end">
        <omgdi:waypoint x="1029.5526173285177" y="232.8855421686747"></omgdi:waypoint>
        <omgdi:waypoint x="1080.0002432053427" y="232.58353165235738"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B425BE94-E427-4AAA-94A8-AB5E90067803" id="BPMNEdge_sid-B425BE94-E427-4AAA-94A8-AB5E90067803">
        <omgdi:waypoint x="538.5" y="212.5"></omgdi:waypoint>
        <omgdi:waypoint x="538.5" y="112.32316205018004"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-22AE6E8D-03EE-4850-877B-D6675F45693B" id="BPMNEdge_sid-22AE6E8D-03EE-4850-877B-D6675F45693B">
        <omgdi:waypoint x="524.3852005532503" y="226.61290322580646"></omgdi:waypoint>
        <omgdi:waypoint x="388.0" y="167.0"></omgdi:waypoint>
        <omgdi:waypoint x="309.95000000000005" y="206.9140625"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="service_configuration_activity_start" id="BPMNEdge_service_configuration_activity_start">
        <omgdi:waypoint x="164.94999848995764" y="232.5"></omgdi:waypoint>
        <omgdi:waypoint x="210.0" y="232.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-E089688F-8931-4454-A524-66B4894DC333" id="BPMNEdge_sid-E089688F-8931-4454-A524-66B4894DC333">
        <omgdi:waypoint x="744.9499999999836" y="232.5"></omgdi:waypoint>
        <omgdi:waypoint x="840.0" y="232.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F239A610-7B9B-4BBC-B4F2-701E56DCBEB6" id="BPMNEdge_sid-F239A610-7B9B-4BBC-B4F2-701E56DCBEB6">
        <omgdi:waypoint x="860.5" y="251.9303014553015"></omgdi:waypoint>
        <omgdi:waypoint x="860.5" y="281.0"></omgdi:waypoint>
        <omgdi:waypoint x="1010.0" y="281.0"></omgdi:waypoint>
        <omgdi:waypoint x="1010.0" y="252.42050619834717"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FBB935CD-A237-4D83-B5A2-AD7765C361A5" id="BPMNEdge_sid-FBB935CD-A237-4D83-B5A2-AD7765C361A5">
        <omgdi:waypoint x="388.9441185141509" y="232.5"></omgdi:waypoint>
        <omgdi:waypoint x="518.5" y="232.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="get-ip-service-info-async-wait-time" id="BPMNEdge_get-ip-service-info-async-wait-time">
        <omgdi:waypoint x="429.3532251727116" y="96.05173284409628"></omgdi:waypoint>
        <omgdi:waypoint x="529.6116323690287" y="221.38322724901064"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C7D0DF49-B77E-43F9-96FE-197C74FE1DBA" id="BPMNEdge_sid-C7D0DF49-B77E-43F9-96FE-197C74FE1DBA">
        <omgdi:waypoint x="946.9499969165176" y="233.0"></omgdi:waypoint>
        <omgdi:waypoint x="990.5" y="233.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-EBEE76C5-0124-4A82-BFB8-78BC684F3FF8" id="BPMNEdge_sid-EBEE76C5-0124-4A82-BFB8-78BC684F3FF8">
        <omgdi:waypoint x="538.1514049551164" y="32.37316205018004"></omgdi:waypoint>
        <omgdi:waypoint x="538.0" y="15.0"></omgdi:waypoint>
        <omgdi:waypoint x="260.0" y="15.0"></omgdi:waypoint>
        <omgdi:waypoint x="260.0" y="192.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FDBD136A-B59B-4713-AA35-9CDAF04B37E9" id="BPMNEdge_sid-FDBD136A-B59B-4713-AA35-9CDAF04B37E9">
        <omgdi:waypoint x="369.0" y="212.5"></omgdi:waypoint>
        <omgdi:waypoint x="369.0" y="142.95"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-BA2723D7-D451-4058-90F5-6FBC88E2CB67" id="BPMNEdge_sid-BA2723D7-D451-4058-90F5-6FBC88E2CB67">
        <omgdi:waypoint x="558.441885844644" y="232.5"></omgdi:waypoint>
        <omgdi:waypoint x="644.9999999999786" y="232.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>